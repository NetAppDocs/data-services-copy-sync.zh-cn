---
sidebar: sidebar 
permalink: task-managing-data-brokers.html 
keywords: manage data brokers, manage data broker groups, data broker performance, data broker configuration, data broker removal, remove data broker, delete data broker, groups, data broker group, rename data broker group, add data broker, data broker cpu, data broker ram, data broker status, edit group name, change group name, modify group name 
summary: 数据代理将数据从源位置同步到目标位置。您创建的每个同步关系都需要一个数据代理。通过将新的数据代理添加到组、查看有关数据代理的信息等来管理数据代理。 
---
= 在NetApp Copy and Sync 中管理数据代理组
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
NetApp Copy and Sync 中的数据代理组将数据从源位置同步到目标位置。对于您创建的每个同步关系，组中至少需要一个数据代理。通过向组添加新的数据代理、查看有关组的信息等方式来管理数据代理组。



== 数据经纪人团体如何运作

数据代理组可以包括一个或多个数据代理。将数据代理分组在一起可以帮助提高同步关系的性能。



=== 组可以管理多个关系

数据代理组可以同时管理一个或多个同步关系。

例如，假设您有三种关系：

* 关系 1 由数据经纪人组 A 管理
* 关系 2 由数据经纪人组 B 管理
* 关系 3 由数据经纪人组 A 管理


您想要加速关系 1 的性能，因此您向数据代理组 A 添加一个新的数据代理。由于组 A 还管理同步关系 3，因此关系的同步性能也会自动加速。



=== 一个组中的数据代理数量

在许多情况下，单个数据代理可以满足同步关系的性能要求。如果没有，您可以通过向组中添加额外的数据代理来加速同步性能。但您应该首先检查可能影响同步性能的其他因素。link:faq.html#how-many-data-brokers-are-required-in-a-group["详细了解如何确定何时需要多个数据代理"] 。



== 安全建议

为了确保数据代理机器的安全， NetApp建议采取以下措施：

* SSH 不应允许 X11 转发
* SSH 不应允许 TCP 连接转发
* SSH 不应允许隧道
* SSH 不应接受客户端环境变量


这些安全建议有助于防止未经授权连接到数据代理机器。



== 将新的数据代理添加到组

创建新的数据代理有多种方法：

* 创建新的同步关系时
+
link:task-creating-relationships.html["了解如何在创建同步关系时创建新的数据代理"] 。

* 在“管理数据代理”页面中选择“添加新数据代理”，这将在新组中创建数据代理
* 从“管理数据代理”页面，在现有组中创建新的数据代理


.开始之前
* 您不能将数据代理添加到管理加密同步关系的组中。
* 如果您想在现有组中创建数据代理，则该数据代理必须是本地数据代理或相同类型的数据代理。
+
例如，如果某个组包含 AWS 数据代理，那么您可以在该组中创建 AWS 数据代理或本地数据代理。您无法创建 Azure 数据代理或 Google Cloud 数据代理，因为它们不是相同的数据代理类型。



.在新组中创建数据代理的步骤
. link:task-login-copyandsync.html["登录以复制和同步"] 。
. 选择*同步>管理数据代理*。
. 选择*添加新数据代理*。
. 按照提示创建数据代理。
+
如需帮助，请参阅以下页面：

+
** link:task-installing-aws.html["在 AWS 中创建数据代理"]
** link:task-installing-azure.html["在 Azure 中创建数据代理"]
** link:task-installing-gcp.html["在 Google Cloud 中创建数据代理"]
** link:task-installing-linux.html["在 Linux 主机上安装数据代理"]




.在现有组中创建数据代理的步骤
. link:task-login-copyandsync.html["登录以复制和同步"] 。
. 选择*同步>管理数据代理*。
. 选择操作菜单并选择*添加数据代理*。
+
image:screenshot_sync_group_add.png["组中每个单独的数据代理可用的操作菜单的屏幕截图。"]

. 按照提示在组中创建数据代理。
+
如需帮助，请参阅以下页面：

+
** link:task-installing-aws.html["在 AWS 中创建数据代理"]
** link:task-installing-azure.html["在 Azure 中创建数据代理"]
** link:task-installing-gcp.html["在 Google Cloud 中创建数据代理"]
** link:task-installing-linux.html["在 Linux 主机上安装数据代理"]






== 编辑群组名称

随时更改数据代理组的名称。

.步骤
. link:task-login-copyandsync.html["登录以复制和同步"] 。
. 选择*同步>管理数据代理*。
. 选择操作菜单并选择*编辑组名*。
+
image:screenshot_sync_group_edit.gif["组中每个单独的数据代理可用的操作菜单的屏幕截图。"]

. 输入新名称并选择*保存*。


.结果
复制和同步更新数据代理组的名称。



== 设置统一配置

如果同步关系在同步过程中遇到错误，统一数据代理组的并发可以帮助减少同步错误的数量。请注意，更改组配置可能会减慢传输速度，从而影响性能。

我们不建议您自行更改配置。您应该咨询NetApp以了解何时更改配置以及如何更改。

.步骤
. link:task-login-copyandsync.html["登录以复制和同步"] 。
. 选择*管理数据代理*。
. 选择数据代理组的设置图标。
+
image:screenshot_sync_group_settings.png["显示数据经纪人组的设置图标的屏幕截图。"]

. 根据需要更改设置，然后选择*统一配置*。
+
请注意以下事项：

+
** 您可以选择要更改的设置——您不需要一次更改所有四个设置。
** 将新配置发送到数据代理后，数据代理会自动重新启动并使用新配置。
** 此更改可能需要一分钟才能生效并在复制和同步界面中可见。
** 如果数据代理没有运行，它的配置将不会改变，因为复制和同步无法与其通信。数据代理重启后配置将会改变。
** 设置统一配置后，任何新的数据代理都将自动使用新配置。






== 在组之间移动数据代理

如果您需要加速目标数据代理组的性能，请将数据代理从一个组移动到另一个组。

例如，如果数据代理不再管理同步关系，您可以轻松地将其移动到管理同步关系的另一个组。

.限制
* 如果数据代理组正在管理同步关系，并且组中只有一个数据代理，那么您无法将该数据代理移动到另一个组。
* 您不能将数据代理移至管理加密同步关系的组或从该组移出。
* 您无法移动当前正在部署的数据代理。


.步骤
. link:task-login-copyandsync.html["登录以复制和同步"] 。
. 选择*同步>管理数据代理*。
. 选择image:screenshot_sync_group_expand.gif["该按钮的屏幕截图可让您展开组中的数据代理列表。"]扩展组中数据经纪人的列表。
. 选择数据代理的操作菜单并选择*移动数据代理*。
+
image:screenshot_sync_group_remove.png["每个单独的数据代理组可用的操作菜单的屏幕截图。"]

. 创建一个新的数据代理组或选择一个现有的数据代理组。
. 选择*移动*。


.结果
复制和同步将数据代理移动到新的或现有的数据代理组。如果前一组中没有其他数据代理，则复制和同步会将其删除。



== 更新代理配置

通过添加有关新代理配置的详细信息或编辑现有代理配置来更新数据代理的代理配置。

.步骤
. link:task-login-copyandsync.html["登录以复制和同步"] 。
. 选择*同步>管理数据代理*。
. 选择image:screenshot_sync_group_expand.gif["该按钮的屏幕截图可让您展开组中的数据代理列表。"]扩展组中数据经纪人的列表。
. 选择数据代理的操作菜单并选择*编辑代理配置*。
. 指定有关代理的详细信息：主机名、端口号、用户名和密码。
. 选择*更新*。


.结果
复制和同步更新数据代理以使用代理配置进行互联网访问。



== 查看数据代理的配置

您可能想要查看有关数据代理的详细信息，以识别其主机名、IP 地址、可用 CPU 和 RAM 等信息。

复制和同步提供有关数据代理的以下详细信息：

* 基本信息：实例ID、主机名等。
* 网络：区域、网络、子网、私有IP等。
* 软件：Linux发行版、数据代理版本等。
* 硬件：CPU 和 RAM
* 配置：数据代理的两种主要进程——扫描器和传输器的详细信息
+

TIP: 扫描仪扫描源和目标并决定应该复制什么。转让人进行实际的复制。  NetApp人员可能会使用这些配置详细信息来建议可以优化性能的操作。



.步骤
. link:task-login-copyandsync.html["登录以复制和同步"] 。
. 选择*同步>管理数据代理*。
. 选择image:screenshot_sync_group_expand.gif["该按钮的屏幕截图可让您展开组中的数据代理列表。"]扩展组中数据经纪人的列表。
. 选择image:screenshot_sync_group_expand.gif["按钮的屏幕截图，可让您展开有关数据代理的详细信息。"]查看有关数据代理的详细信息。
+
image:screenshot_sync_data_broker_details.gif["有关数据经纪人的信息的屏幕截图。"]





== 解决数据代理问题

复制和同步显示每个数据代理的状态，可以帮助您解决问题。

.步骤
. link:task-login-copyandsync.html["登录以复制和同步"] 。
. 识别任何状态为“未知”或“失败”的数据代理。
+
image:screenshot_sync_broker_status.gif["复制和同步状态显示的屏幕截图，其中数据代理的状态为“未知”。"]

. 将鼠标悬停在image:screenshot_sync_status_icon.gif["“信息”图标。"]图标查看失败原因。
. 纠正问题。
+
例如，如果数据代理处于离线状态，您可能需要重新启动它；如果初始部署失败，您可能需要删除数据代理。





== 从组中删除数据代理

如果不再需要数据代理或初始部署失败，您可以从组中删除该数据代理。此操作仅从复制和同步的记录中删除数据代理。您需要手动删除数据代理和任何其他云资源。

.您应该知道的事情
* 当您从组中删除最后一个数据代理时，复制和同步会删除该组。
* 如果存在使用该组的关系，则您无法从该组中删除最后一个数据代理。


.步骤
. link:task-login-copyandsync.html["登录以复制和同步"] 。
. 选择*同步>管理数据代理*。
. 选择image:screenshot_sync_group_expand.gif["该按钮的屏幕截图可让您展开组中的数据代理列表。"]扩展组中数据经纪人的列表。
. 选择数据代理的操作菜单并选择*删除数据代理*。
+
image:screenshot_sync_group_remove.gif["每个单独的数据代理组可用的操作菜单的屏幕截图。"]

. 选择*删除数据代理*。


.结果
复制和同步会从组中删除数据代理。



== 删除数据代理组

如果数据代理组不再管理任何同步关系，您可以删除该组，这将从复制和同步中删除所有数据代理。

Copy and Sync 删除的数据代理仅从 Copy and Sync 的记录中删除。您需要从云提供商处手动删除数据代理实例和任何其他云资源。

.步骤
. link:task-login-copyandsync.html["登录以复制和同步"] 。
. 选择*同步>管理数据代理*。
. 选择操作菜单并选择*删除组*。
+
image:screenshot_sync_group_add.png["组中每个单独的数据代理可用的操作菜单的屏幕截图。"]

. 为了确认，请输入组名并选择*删除组*。


.结果
复制和同步会删除数据代理并删除该组。
